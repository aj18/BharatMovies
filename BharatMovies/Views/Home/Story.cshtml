@using System.Web.Script.Serialization;
@using System.Web.Script.Serialization;
@using System.Configuration;
@{
    string returnUrl = ConfigurationManager.AppSettings.Get("returnUrl");
    string returnUrl3 = ConfigurationManager.AppSettings.Get("returnUrl3");
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    //dynamic templatedata = serializer.Deserialize<object>(ViewBag.Stories);
    string styleSmall = @"{
	panelStyle: {
		'padding': '0px;',
		'height': '247px;',
		'border-radius': '5px !important;'
	},
	titleStyle: {
		'position': 'relative;',
		'height': '35px;',
		'left': '0px;',
		'padding': '5px;',
		'display': 'inline-block;',
		'max-width': '65%;',
		'text-overflow': 'ellipsis;',
		'white-space': 'nowrap;',
		'overflow': 'hidden;',
		'background-color': 'rgba(255, 80, 10, 0.85);',
		'font-size': '16px;',
		'color': '#fff;',
		'bottom': '90px;',
	},
	subTitleStyle: {
		'background-color': 'rgba(255, 255, 255, 0.65);',
		'font-size': '14px;',
		'color': '#000;',
		'text-overflow': 'ellipsis;',
		'white-space': 'nowrap;',
		'overflow': 'hidden;',
		'bottom': '90px',
		'position': 'relative;',
		'padding': '5px;'
	},
	pictureStyle: {
		'height': '247px !important;',
		'border-radius': '5px !important;'
	}
}";
}
@Html.Partial("~/Views/Shared/_js.cshtml")
<script type="text/javascript">

    var returnUrl ="@(Html.Raw(returnUrl))";
    var returnUrl3 ="@(Html.Raw(returnUrl3))";


</script>

<div class="row">
    <div class="col s12 l12 m12"><a href="@Url.Action("News", "Home",new { id = ViewBag.ID })"><h4>@(Html.Raw(ViewBag.Title))</h4></a></div>
    <div class="col s12 l9 m9" style="padding-right:50px">
       
        <div class="row">
        
            
            <div class="col s12" id="story">
            </div>
           
        </div>
       
        </div>
   
    <div class="col s12 l3 m3">
        <div class="row">
            <div class="col s12" id="si">
            </div>
            <div class="col s12">
                <h4>Related Story</h4>
                @if (ViewBag.Stories != null)
                {
                    foreach (var item in ViewBag.Stories)
                    {

                        @Html.Action("StoryCard", "PartialView", new { cardType = "SMALL", cNo = ViewBag.ID, Storyid = item["key"], style = styleSmall, Isslider = false })


                    }
                }
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
            var Bubbly = new BubblyCard();

            var data =@(Html.Raw(ViewBag.Summary));
            var ID ="@(Html.Raw(ViewBag.ID))";
            var ReturnUrl="@(Html.Raw(ViewBag.ReturnUrl))"
            var ReturnUrl3="@(Html.Raw(ViewBag.ReturnUrl3))"
            var SearchQuery ="@(Html.Raw(ViewBag.SearchQuery))";
            var StoryId ="@(Html.Raw(ViewBag.StoryId))";


        





          
            Bubbly.showCard({ "campaignId": ID, "cardType": "SIM", "returnUrl": returnUrl3, "styles": {}, "clientId": 100 },data, document.getElementById("si"));
            
                var paraStory ={
                    "campaignId" : ID,
                    "cardType" : "STORY",
                    "returnUrl" : "",
                    "styles" : { },
                    "title" : "",
                    "description" : "",
                    "clientId" : "100" ,
                    "storyId" : StoryId
                };
                Bubbly.showStoryCards(paraStory,null,document.getElementById("story"));

              
</script>
